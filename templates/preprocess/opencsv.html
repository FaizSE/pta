    {% extends 'base.html' %}

    {% block title %}Preprocess File{% endblock %}

    {% block stylesheet %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    {% endblock %}

    {% block style %}
    table {
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;

    border: 1px solid #ddd;
}

th, td {
text-align: left;
padding: 0px;
height:1px;
}

tr:nth-child(even){background-color: #f2f2f2}

th {
padding-top: 12px;
padding-bottom: 12px;
text-align: center;
background-color: #000000;
color: white;
}

{% endblock style %}


{% block header %}Preprocess{% endblock %}

{% block content %}

<div class="row" style="background-color:red">
	{% if messages %}
	{% for message in messages %}
	{{message}}
	{% endfor %}
	{% endif %}
</div>

<div class="row" style="height:400px; overflow:scroll;">
	<table>{{loaded_data | safe}}</table>
</div>

<div class="row" hidden>
	<div id="btn1" class="button">Restructure Table</div>
	<div id="btn2" class="button">Normalize Data Type</div>
	<div id="btn3" class="button">Incomplete Row</div>
	<div id="btn4" class="button">Edit Character</div>
</div>

<div class="container">
	<div class="panel-group">

		<!--Panel 1-->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title">
					<a data-toggle="collapse" href="#collapse1">Restructure Table</a>
				</h4>
			</div>
			<div id="collapse1" class="panel-collapse collapse">
				<ul class="list-group">
					<li class="list-group-item">
						<form action="" method="post">
							{% csrf_token %}
							<div class="form-group">
								<label>Column</label>
								<select class="form-control" name="delcol">
									{% for x in colname %}
									<option>{{ x | safe }}</option>
									{% endfor %}
								</select>

								<input class="btn btn-primary" type="submit" name = "dropcol" value="Drop Column"/>
							</div>
						</form>
					</li>
					<li class="list-group-item">
						<form action="" method="post">
							{% csrf_token %}
							<div class="form-group">
								<div class="row">
									<div class="col">
										<label>Old Header Name:</label>
										<select class="form-control" name="oldcol">
											{% for x in colname %}
											<option>{{ x | safe }}</option>
											{% endfor %}
										</select>
									</div>

									<div class="col">
										<label>New Header Name:</label>
										<input class="form-control" type="text" name="newcol">
									</div>

								</div>
							</div>

							<input class="btn btn-primary" type="submit" name = "renamecol" value="Rename Column"/>
						</form>
					</li>
				</ul>
			</div>

			<!--Panel 2-->
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4 class="panel-title">
						<a data-toggle="collapse" href="#collapse2">Normalize Data Type</a>
					</h4>
				</div>
				<div id="collapse2" class="panel-collapse collapse">
					<ul class="list-group">
						<li class="list-group-item">
							<table>
								<thead class="thead-inverse">
									<tr>
										<th>Column</th>
										<th>Data Type</th>
										<th>Change To</th>
									</tr>
								</thead>

								{% for x,y in colnametype %}
								<tr>

									<td style="text-align: center;"><strong>{{ x | safe }}</strong></td>
									<td style="text-align: center;">{{ y | safe }}</td>
									<td style="text-align: center;">
										<form action="" method="post">
											{% csrf_token %}
											<select name="changetypecol" hidden>
												<option>{{ x | safe }}</option>
											</select>
											<select name="changetypeto">
												<option value="object">Object</option>
												<option value="float64">Float-64</option>
												<option value="int64">Integer-64</option>
												<option value="datetime64">Datetime-64</option>
											</select>

											<input type="submit" name = "changetype" value="Accept"/><br/>
										</form>
									</td>

								</tr>
								{% endfor %}
							</table>
						</li>
						<li class="list-group-item">
						</li>
					</ul>
				</div>
			</div>

			<!--Panel 3-->
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4 class="panel-title">
						<a data-toggle="collapse" href="#collapse3">Incomplete Row</a>
					</h4>
				</div>
				<div id="collapse3" class="panel-collapse collapse">
					<ul class="list-group">
						<li class="list-group-item">
							<form action="" method="post">
								{% csrf_token %}
								<input type="submit" name = "dropna" value="Drop Empty Row"/>
							</form>
						</li>

						<li class="list-group-item">
							<form action="" method="post">
								{% csrf_token %}

								Minimum non-null column:  <input type="number" name="thresh" min="1" step="1" value="1">
								<input type="submit" name = "dropnathresh" value="Drop Row with Missing Attribute"/>

							</form>
						</li>

						<li class="list-group-item">
							<form action="" method="post">
								{% csrf_token %}
								Column:
								<select name="colx">
									{% for x in colname %}
									<option>{{ x | safe }}</option>
									{% endfor %}
								</select>
								<input type="submit" name = "dropnacol" value="Drop Row without this Column"/>
							</form>
						</li>

						<li class="list-group-item">
							<form action="" method="post">
								{% csrf_token %}
								Column:
								<select name="coly">
									{% for x in colname %}
									<option>{{ x | safe }}</option>
									{% endfor %}
								</select>
								<input type="submit" name = "fillmean" value="Fill with Mean"/>
							</form>
						</li>
						<li class="list-group-item">
							<form action="" method="post">
								{% csrf_token %}
								Column:
								<select name="colz">
									{% for x in colname %}
									<option>{{ x | safe }}</option>
									{% endfor %}
								</select>
								<input type="submit" name = "fillmode" value="Fill with Mode"/>
							</form>
						</li>
					</ul>
				</div>

			</div>

			<!--Panel 4-->
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4 class="panel-title">
						<a data-toggle="collapse" href="#collapse4">Modify String</a>
					</h4>
				</div>
				<div id="collapse4" class="panel-collapse collapse">
					<ul class="list-group">
						<li class="list-group-item">
							<form action="" method="post">
								{% csrf_token %}
								Column:
								<select name="stripcol">
									{% for x in colname %}
									<option>{{ x | safe }}</option>
									{% endfor %}
								</select>
								<input type="submit" name = "strip" value="Remove Whitespace"/>							</form>
							</li>

							<li class="list-group-item">
								<form action="" method="post">
									{% csrf_token %}

									Minimum non-null column:  <input type="number" name="thresh" min="1" step="1" value="1">
									<input type="submit" name = "dropnathresh" value="Drop Row with Missing Attribute"/>

								</form>
							</li>

							<li class="list-group-item">
								<form action="" method="post">
									{% csrf_token %}
									Select Column:
									<select name="modchar">
										{% for x in colname %}
										<option>{{ x | safe }}</option>
										{% endfor %}
									</select>
									Char to be replaced: <input type="text" name="oldchar">
									Replace with: <input type="text" name="newchar">

									<input type="submit" name = "modcol" value="Modify Char"/>
								</form>
							</li>

						</ul>
					</div>

				</div>
			</div>

			{% endblock %}